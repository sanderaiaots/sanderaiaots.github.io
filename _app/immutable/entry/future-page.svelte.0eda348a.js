import{S as nt,i as rt,s as st,k as d,r as u,a as A,l as h,m as _,u as c,h as g,c as B,p as G,b as lt,G as t,n as x,O as ot,H as it,o as dt,q as K,v as q}from"../chunks/index.d5371c42.js";import{w as ht}from"../chunks/index.e47fd4b9.js";const tt=ht([]);function et(r,a,l){const v=r.slice();return v[7]=a[l],v}function at(r){let a,l,v=r[7].jsdate.getDate()+"",k,O,b=r[7].jsdate.getMonth()+1+"",P,w,p=r[7].jsdate.getFullYear()+"",E,H,F=(""+r[7].jsdate.getHours()).padStart(2,"0")+"",o,T,f=(""+(r[7].jsdate.getHours()+1)).padStart(2,"0")+"",I,C,y,Y=(r[7].price/10).toFixed(3)+"",N,R,S,V=(r[7].price*1.2/10).toFixed(3)+"",U,M,j,i=((r[7].price/10+r[3]+(r[7].isDay?r[1]:r[2]))*1.2).toFixed(3)+"",s,D;return{c(){a=d("tr"),l=d("td"),k=u(v),O=u("."),P=u(b),w=u("."),E=u(p),H=A(),o=u(F),T=u("-"),I=u(f),C=A(),y=d("td"),N=u(Y),R=A(),S=d("td"),U=u(V),M=A(),j=d("td"),s=u(i),D=A(),this.h()},l(e){a=h(e,"TR",{});var n=_(a);l=h(n,"TD",{});var m=_(l);k=c(m,v),O=c(m,"."),P=c(m,b),w=c(m,"."),E=c(m,p),H=B(m),o=c(m,F),T=c(m,"-"),I=c(m,f),m.forEach(g),C=B(n),y=h(n,"TD",{style:!0});var L=_(y);N=c(L,Y),L.forEach(g),R=B(n),S=h(n,"TD",{style:!0});var $=_(S);U=c($,V),$.forEach(g),M=B(n),j=h(n,"TD",{style:!0});var z=_(j);s=c(z,i),z.forEach(g),D=B(n),n.forEach(g),this.h()},h(){K(y,"text-align","right"),K(S,"text-align","right"),K(j,"text-align","right")},m(e,n){lt(e,a,n),t(a,l),t(l,k),t(l,O),t(l,P),t(l,w),t(l,E),t(l,H),t(l,o),t(l,T),t(l,I),t(a,C),t(a,y),t(y,N),t(a,R),t(a,S),t(S,U),t(a,M),t(a,j),t(j,s),t(a,D)},p(e,n){n&1&&v!==(v=e[7].jsdate.getDate()+"")&&q(k,v),n&1&&b!==(b=e[7].jsdate.getMonth()+1+"")&&q(P,b),n&1&&p!==(p=e[7].jsdate.getFullYear()+"")&&q(E,p),n&1&&F!==(F=(""+e[7].jsdate.getHours()).padStart(2,"0")+"")&&q(o,F),n&1&&f!==(f=(""+(e[7].jsdate.getHours()+1)).padStart(2,"0")+"")&&q(I,f),n&1&&Y!==(Y=(e[7].price/10).toFixed(3)+"")&&q(N,Y),n&1&&V!==(V=(e[7].price*1.2/10).toFixed(3)+"")&&q(U,V),n&1&&i!==(i=((e[7].price/10+e[3]+(e[7].isDay?e[1]:e[2]))*1.2).toFixed(3)+"")&&q(s,i)},d(e){e&&g(a)}}}function ut(r){let a,l,v,k,O,b,P,w,p,E,H,F,o,T,f,I,C,y,Y,N,R,S,V,U,M,j=r[0],i=[];for(let s=0;s<j.length;s+=1)i[s]=at(et(r,j,s));return{c(){a=d("section"),l=d("p"),v=u("Võrgutasu päev: "),k=d("input"),O=u(`
		Võrgutasu öö: `),b=d("input"),P=u(`
		Taastuvenergia tasu: `),w=d("input"),p=A(),E=d("p"),H=u("Hinnad on senti kwh kohta"),F=A(),o=d("table"),T=d("thead"),f=d("tr"),I=d("th"),C=u("Tund"),y=d("th"),Y=u("Hind"),N=d("th"),R=u("Hind + km"),S=d("th"),V=u("Hind + võrk + taastuv"),U=A(),M=d("tbody");for(let s=0;s<i.length;s+=1)i[s].c();this.h()},l(s){a=h(s,"SECTION",{});var D=_(a);l=h(D,"P",{});var e=_(l);v=c(e,"Võrgutasu päev: "),k=h(e,"INPUT",{type:!0}),O=c(e,`
		Võrgutasu öö: `),b=h(e,"INPUT",{type:!0}),P=c(e,`
		Taastuvenergia tasu: `),w=h(e,"INPUT",{type:!0}),e.forEach(g),p=B(D),E=h(D,"P",{});var n=_(E);H=c(n,"Hinnad on senti kwh kohta"),n.forEach(g),F=B(D),o=h(D,"TABLE",{border:!0,cellpadding:!0,cellspacing:!0});var m=_(o);T=h(m,"THEAD",{});var L=_(T);f=h(L,"TR",{});var $=_(f);I=h($,"TH",{});var z=_(I);C=c(z,"Tund"),z.forEach(g),y=h($,"TH",{});var Q=_(y);Y=c(Q,"Hind"),Q.forEach(g),N=h($,"TH",{});var W=_(N);R=c(W,"Hind + km"),W.forEach(g),S=h($,"TH",{});var X=_(S);V=c(X,"Hind + võrk + taastuv"),X.forEach(g),$.forEach(g),L.forEach(g),U=B(m),M=h(m,"TBODY",{});var Z=_(M);for(let J=0;J<i.length;J+=1)i[J].l(Z);Z.forEach(g),m.forEach(g),D.forEach(g),this.h()},h(){G(k,"type","number"),k.value=r[1],G(b,"type","number"),b.value=r[2],G(w,"type","number"),w.value=r[3],G(o,"border","1"),G(o,"cellpadding","0"),G(o,"cellspacing","0")},m(s,D){lt(s,a,D),t(a,l),t(l,v),t(l,k),t(l,O),t(l,b),t(l,P),t(l,w),t(a,p),t(a,E),t(E,H),t(a,F),t(a,o),t(o,T),t(T,f),t(f,I),t(I,C),t(f,y),t(y,Y),t(f,N),t(N,R),t(f,S),t(S,V),t(o,U),t(o,M);for(let e=0;e<i.length;e+=1)i[e].m(M,null)},p(s,[D]){if(D&15){j=s[0];let e;for(e=0;e<j.length;e+=1){const n=et(s,j,e);i[e]?i[e].p(n,D):(i[e]=at(n),i[e].c(),i[e].m(M,null))}for(;e<i.length;e+=1)i[e].d(1);i.length=j.length}},i:x,o:x,d(s){s&&g(a),ot(i,s)}}}function ct(r,a,l){let v;it(r,tt,p=>l(0,v=p));let k=new Date,O=.0369*100,b=.021*100,P=.0124*100;async function w(){let p=new Date,E=new Date(p.getFullYear(),p.getMonth(),p.getDate());console.log("dates: ",p.getFullYear(),p.getMonth(),p.getDate()),console.log("parsed: ",E);const H=new Date(k);H.setDate(H.getDate()+1),H.setSeconds(H.getSeconds()-1);const F="https://dashboard.elering.ee/api/nps/price?start="+E.toISOString()+"&end="+H.toISOString();fetch(F).then(o=>o.json()).then(o=>{tt.set(o.data.ee),o.data.ee.forEach(T=>{T.jsdate=new Date(T.timestamp*1e3);const f=T.jsdate.getHours();T.isDay=f>=7&&f<21})}).catch(o=>console.log("data error",o))}return dt(w),[v,O,b,P]}class ft extends nt{constructor(a){super(),rt(this,a,ct,ut,st,{})}}export{ft as default};
